<section class="overlape">
    <div class="block no-padding">
        <div class="parallax scrolly-invisible no-parallax"
             data-velocity="-.1"
             style="background: url(http://placehold.it/1600x800) repeat scroll 50% 422.28px transparent;"></div>
        <!-- PARALLAX BACKGROUND IMAGE -->
        <div class="container fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="inner-header">
                        <h3>Welcome <[name]></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    div#notification {
        width: 100%;
        height: 60px;
        background-color: #c5dbbd;
        border-radius: 8px;
        display: none;
        padding: 10px;
        margin-bottom: 10px;
        text-align: center;
    }
</style>

<section>
    <div class="block no-padding">
        <div class="container">
            <div class="row no-gape">
                <div id="notification"></div>
                <aside class="col-lg-3 column border-right">
                    <div class="widget">
                        <div class="tree_widget-sec">
                            <ul>
                                <li><a href="employer_profile.php" title=""><i class="la la-file-text"></i>Company
                                    Profile</a></li>
                                <li><a href="employer_manage_jobs.php" title=""><i class="la la-briefcase"></i>Manage
                                    Jobs</a></li>
                                <li><a href="employer_resume.php" title=""><i class="la la-paper-plane"></i>Resumes</a>
                                </li>
                                <li><a href="employer_post_new.php" title=""><i class="la la-file-text"></i>Post a New
                                    Job</a></li>
                                <li><a href="employer_change_password.php" title=""><i class="la la-lock"></i>Change
                                    Password</a></li>
                                <li><a href="logout.php" title=""><i class="la la-unlink"></i>Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </aside>
                <div class="col-lg-9 column">
                    <div class="padding-left">
                        <div class="profile-title" id="mp">
                            <h3>My Profile</h3>
                            <div class="upload-img-bar">
                                <span class="round"><img alt="" src="<[image]>"/></span>
                                <!-- Form for file upload -->
                                <form action="upload_profile_image.php" enctype="multipart/form-data" id="uploadForm"
                                      method="post">
                                    <div class="upload-info">
                                        <input name="source" type="hidden" value="employer">
                                        <!-- File input with a name attribute and change event listener -->
                                        <input id="fileToUpload" name="fileToUpload" onchange="submitForm()"
                                               style="display:none;"
                                               type="file"/>
                                        <!-- Browse link triggers file input -->
                                        <a href="#" id="browseButton" title="">Browse</a>
                                        <span>Max file size is 1MB, suitable files are .jpg & .png</span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="profile-form-edit">
                        <form action="update_employer_profile.php" method="post">
                            <div class="row">
                                <div class="col-lg-6">
                                    <span class="pf-title">Company Name</span>
                                    <div class="pf-field">
                                        <input name="name" type="text" value="<[name]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <span class="pf-title">Since</span>
                                    <div class="pf-field">
                                        <input name="since" type="text" value="<[since]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span class="pf-title">Description</span>
                                    <div class="pf-field">
                                        <textarea name="description"><[description]></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <button type="submit">Update</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <form action="update_contact_info.php" method="post">
                        <input name="source" type="hidden" value="employer">
                        <div class="social-edit" id="sn">
                            <h3>Social Edit</h3>
                            <div class="row">
                                <div class="col-lg-6">
                                    <span class="pf-title">Facebook</span>
                                    <div class="pf-field">
                                        <input name="facebook" type="text" value="<[facebook]>"/>
                                        <i class="fa fa-facebook"></i>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">Instagram</span>
                                    <div class="pf-field">
                                        <input name="instagram" type="text" value="<[instagram]>"/>
                                        <i class="fa fa-instagram"></i>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">Website</span>
                                    <div class="pf-field">
                                        <input name="website" type="text" value="<[website]>"/>
                                        <i class="la la-unlink"></i>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">LinkedIn</span>
                                    <div class="pf-field">
                                        <input name="linkedin" type="text" value="<[linkedin]>"/>
                                        <i class="la la-linkedin"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="contact-edit" id="ci">
                            <h3>Contact</h3>
                            <div class="row">
                                <div class="col-lg-6">
                                    <span class="pf-title">Phone Number</span>
                                    <div class="pf-field">
                                        <input name="phone_num" type="text" value="<[phone_num]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">Email</span>
                                    <div class="pf-field">
                                        <input name="email" type="text" value="<[email]>"/>
                                    </div>
                                </div>
                            </div>
                            <h3>Company Address</h3>
                            <div class="row">
                                <div class="col-lg-6">
                                    <span class="pf-title">Country</span>
                                    <div class="pf-field">
                                        <input name="country" type="text" value="<[country]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">City</span>
                                    <div class="pf-field">
                                        <input name="city" type="text" value="<[city]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <span class="pf-title">Postcode</span>
                                    <div class="pf-field">
                                        <input name="postcode" type="text" value="<[postcode]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <span class="pf-title">Street</span>
                                    <div class="pf-field">
                                        <input name="street" type="text" value="<[street]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <span class="pf-title">Civic</span>
                                    <div class="pf-field">
                                        <input name="civic" type="text" value="<[civic]>"/>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <button type="submit">Update</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript to trigger the file input and form submission -->
<script>
    $(document).ready(function () {
        // Display notification if message is present in URL
        const urlParams = new URLSearchParams(window.location.search);
        const message = urlParams.get('message');
        console.log(message);
        if (message) {
            $('#notification')
                .html(message)
                .fadeIn()
                .click(function () {
                    $(this).fadeOut();
                });
        }
    });
    document.getElementById('browseButton').addEventListener('click', function (e) {
        e.preventDefault();
        document.getElementById('fileToUpload').click();
    });

    // Function to submit the form automatically when a file is selected
    function submitForm() {
        document.getElementById('uploadForm').submit();
    }
</script>