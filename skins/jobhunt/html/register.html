<section>
	<div class="block no-padding  gray">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="inner2">
						<div class="inner-title2">
							<h3>Register</h3>
							<span>Keep up to date with the latest news</span>
						</div>
						<div class="page-breacrumbs">
							<ul class="breadcrumbs">
								<li><a href="#" title="">Home</a></li>
								<li><a href="#" title="">Pages</a></li>
								<li><a href="#" title="">Register</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<style>
	div#notification {
		width: 100%;
		height: 60px;
		background-color: #ffcaca;
		border-radius: 8px;
		display: none;
		padding: 10px;
		margin-bottom: 10px;
	}

	form#login {
		margin-top: -0px;
	}
</style>

<script crossorigin="anonymous" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
	src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
	$(document).ready(function () {
		$('#signup').click(function () {
			let can = $('#candidate');
			let emp = $('#employer');
			let user = $('#username').val();
			let passwd = $('#password').val();
			let mail = $('#email').val();

			let type = emp.hasClass('active') ? 'employer' : 'candidate';

			$.ajax({
				method: "POST",
				url: "signup_check.php",
				data: { username: user, email: mail }
			})

				.done(function (result) {
					if ((user === '' || passwd === '' || mail === '')) {
						$('#notification')
							.html('Fill all the spaces')
							.fadeIn()
							.click(function () {
								$(this).fadeOut();
							})
					} else if (!(can.hasClass('active') || emp.hasClass('active'))) {
						$('#notification')
							.html('Choose if u wanna be a candidate or an employer')
							.fadeIn()
							.click(function () {
								$(this).fadeOut();
							})
					} else if (result === '0') {
						$('#notification')
							.html('Username have been used')
							.fadeIn()
							.click(function () {
								$(this).fadeOut();
							})
					} else if (result === '1') {
						$('#notification')
							.html('Email have been used')
							.fadeIn()
							.click(function () {
								$(this).fadeOut();
							})
					} else if (result === '2') {
						$.ajax({
							method: "POST",
							url: "registretion.php",
							data: { username: user, password: passwd, email: mail, user_type: type }
						})
						$("#form").submit();
					}
				});
			return false;
		});
	});
</script>

<section>
	<div class="block remove-bottom">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="account-popup-area signup-popup-box static">
						<div class="account-popup">
							<h3>Sign Up</h3>
							<span>Lorem ipsum dolor sit amet consectetur adipiscing elit odio duis risus at lobortis
								ullamcorper</span>
							<div class="select-user">
								<span id="candidate">Candidate</span>
								<span id="employer">Employer</span>
							</div>
							<form id="form" action="candidates_profile.php" method="POST">
								<div id="notification"></div>

								<div class="cfield">
									<input id="username" name="username" placeholder="Username" type="text" />
									<i class="la la-user"></i>
								</div>
								<div class="cfield">
									<input id="password" name="password" placeholder="********" type="password" />
									<i class="la la-key"></i>
								</div>
								<div class="cfield">
									<input id="email" name="email" placeholder="Email" type="text" />
									<i class="la la-envelope-o"></i>
								</div>
								<button type="submit" id="signup">Signup</button>
							</form>
							<div class="extra-login">
								<span>Or</span>
							</div>
							<!-- Fare il bottone di un altro colore (es. bianco) e aggiungere link -->
							<form id="login" action="login.php" method="POST">
								<div>
									<button type="submit">Login</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>